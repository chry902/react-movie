"use strict";(self.webpackChunkcard_movie_react=self.webpackChunkcard_movie_react||[]).push([[228],{228:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(152),i={EditMovie:"styles_EditMovie__4U8qJ",card_edit_container:"styles_card_edit_container__zovkp",form_edit_container:"styles_form_edit_container__lIVSh",cardItem:"styles_cardItem__zqNyw"},a=n(791),s=n(951),c=n(871),o=n(274),l=n(189),d=n(184);var u=function(e){var t=e.setIsModalVisible,n=e.editSuccess,u=(0,c.TH)(),m=(0,a.useState)({}),h=(0,r.Z)(m,2),f=h[0],p=h[1],v=u.pathname.split("/").reverse()[0],_=(0,a.useState)(""),C=(0,r.Z)(_,2),y=C[0],x=C[1],j=(0,c.s0)();return console.log("edit",x),(0,a.useEffect)((function(){var e;n(e=y),console.log("valore da funzione edit",e),!0===y.visible&&j("/")}),[y]),(0,a.useEffect)((function(){(0,s.HT)(v).then((function(e){return p(e)}))}),[v]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:i.EditMovie,children:[(0,d.jsx)("div",{className:i.card_edit_container,children:(0,d.jsx)(o.Z,{className:i.card_item,cardData:f})}),(0,d.jsx)("div",{className:i.form_edit_container,children:(0,d.jsx)(l.H,{className:i.card_form,setIsModalVisible:t,setEditIsVisible:x,callType:"PUT"})})]})})}},951:function(e,t,n){n.d(t,{HT:function(){return i},a4:function(){return a},uO:function(){return c},yY:function(){return s}});var r="https://edgemony-backend.herokuapp.com/movies",i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(r,"/").concat(e)).then((function(e){return e.json()}))},a=function(e){return fetch(r,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)})},s=function(e){return fetch("".concat(r,"/").concat(e),{method:"DELETE"})},c=function(e,t){return fetch("".concat(r,"/").concat(e),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(t)})}},274:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(504),i=n(951),a={CardItem:"stayles_CardItem__cILrD",buttonContainer:"stayles_buttonContainer__AtDwc",imgContainerCard:"stayles_imgContainerCard__nI9au",yearsContainerCard:"stayles_yearsContainerCard__8JpkV",descrCard:"stayles_descrCard__Lt7dC"},s=n(184);var c=function(e){var t=e.cardData,n=e.setMoviesData;return(0,s.jsxs)("div",{className:a.CardItem,children:[(0,s.jsxs)("div",{className:a.titleCardContain,children:[(0,s.jsx)("div",{className:a.buttonContainer,children:(0,s.jsx)("button",{onClick:function(){return e=t.id,(0,i.yY)(e).then((function(){return(0,i.HT)().then((function(e){return n(e)}))})),void console.log("deleted");var e},children:"deleted"})}),(0,s.jsx)(r.rU,{to:"/edit-movie/".concat(t.id),children:(0,s.jsx)("h2",{children:t.title})})]}),(0,s.jsx)("p",{className:a.yearsContainerCard,children:t.year}),(0,s.jsx)("div",{className:a.imgContainerCard,children:(0,s.jsx)("img",{src:t.poster,alt:t.title})}),(0,s.jsx)("p",{className:a.descrCard,children:t.description}),(0,s.jsx)("div",{className:a.genre,children:(0,s.jsx)("ul",{children:t&&Array.isArray(t.genres)?t.genres.map((function(e,t){return(0,s.jsx)("li",{children:e},t)})):(0,s.jsx)("li",{children:t.genres})})})]})}},189:function(e,t,n){n.d(t,{H:function(){return l}});var r=n(152),i=n(791),a=n(871),s=n(951),c={CreateCardForm:"styles_CreateCardForm__j0Ueu"},o=n(184);function l(e){var t=e.setEditIsVisible,n=e.setIsModalVisible,l=e.callType,d=(0,i.useState)(""),u=(0,r.Z)(d,2),m=u[0],h=u[1],f=(0,i.useState)(""),p=(0,r.Z)(f,2),v=p[0],_=p[1],C=(0,i.useState)(""),y=(0,r.Z)(C,2),x=y[0],j=y[1],g=(0,i.useState)(""),b=(0,r.Z)(g,2),N=b[0],S=b[1],I=(0,i.useState)(""),T=(0,r.Z)(I,2),E=T[0],k=T[1],F=function(e){return e.split(",")},Z=(0,a.TH)().pathname.split("/").reverse()[0];return(0,o.jsx)("div",{className:c.CreateCardForm,children:(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"POST"===l?((0,s.a4)({title:m,year:v,poster:x,genres:F(N),description:E}),n({visible:!0,content:"il post \xe8 stato publicato!"})):((0,s.uO)(Z,{title:m,year:v,poster:x,genres:F(N),description:E}),t({visible:!0,content:"Modifica avvenuta con successo!"}))},className:c.form,children:[(0,o.jsx)("label",{htmlFor:"title",children:"Title:"}),(0,o.jsx)("input",{value:m,onChange:function(e){return h(e.target.value)},type:"text",id:"title",name:"title",required:!0}),(0,o.jsx)("label",{htmlFor:"year",children:"Year:"}),(0,o.jsx)("input",{value:v,onChange:function(e){return _(e.target.value)},type:"text",id:"year",name:"year",required:!0}),(0,o.jsx)("label",{htmlFor:"poster",children:"Poster:"}),(0,o.jsx)("input",{value:x,onChange:function(e){return j(e.target.value)},type:"text",id:"poster",name:"poster",required:!0}),(0,o.jsx)("label",{htmlFor:"genres",children:"Genres:"}),(0,o.jsx)("input",{value:N,onChange:function(e){return S(e.target.value)},type:"text",id:"genres",name:"genres",required:!0}),(0,o.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,o.jsx)("input",{value:E,onChange:function(e){return k(e.target.value)},type:"text",id:"description",name:"description",required:!0}),(0,o.jsx)("input",{type:"submit",value:"Send it!"})]})})}}}]);
//# sourceMappingURL=228.0cd241ee.chunk.js.map